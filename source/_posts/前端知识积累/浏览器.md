---
title: 浏览器
date: 2018-12-16
categories: 
- 面试
---
## Cookie、sessionStorage、localStorage的区别
Cookie的大小受限，会在客户与服务器之间交互，不设置过期时间，页面关闭就失效。
sessionStorage仅仅在当前页面有效，页面关闭就失效。
localStorage在同一个浏览器窗口下所有页面有效，且页面关闭也有效，持久有效。容量在不同的浏览器下为5M-10M，可以用JSON.stringify(localStorage).length
## URL到页面加载显示完成发生了什么?
(1) 输入的域名
(2) DNS解析域名得到IP地址
在浏览器缓存、hosts文件、路由器缓存中查找url对应的IP地址。
如果没有找到，则发起一个DNS请求到本地域名服务器，在其缓存中进行查找。
如果没有，本地DNS服务器向根DNS服务器发起请求，根DNS服务器返回顶级DNS服务器的地址；本地DNS服务器向顶级DNS服务器发起请求，顶级DNS服务器返回权限DNS服务器的地址；本地DNS服务器向权限DNS服务器发起请求，权限DNS服务器查询到域名对应的IP后，将IP地址返回给本地DNS服务器；本地DNS服务器接收后将其保存到缓存中，以备下次查询。本地DNS服务器将IP地址返回给客户主机浏览器。
(3) 发起TCP的3次握手
(4) 建立TCP连接(默认端口号80)
(5) 浏览器发出HTTP请求，请求百度首页
(6) 服务器处理请求，返回HTTP响应
(7) 断开TCP连接
(8) 浏览器将首页文件进行解析，渲染
用户请求的HTML文档通过浏览器的网络层到达渲染引擎后，渲染工作开始。
浏览器把HTML代码解析成一个DOM树，根节点是document对象，每个标签都是一个节点，包括display:none的标签和JS动态添加的元素等。（遇到对js、css文件及图片等静态资源的引用，则重复上述步骤并向服务器请求这些资源）
浏览器把所有样式解析成样式结构体，去掉浏览器不能识别的样式。
DOM树和样式结构体组合后构建render树，其中的每个节点都有样式，render树不包括display:none的节点、head节点等。根据CSS2的标准，render树中的每个节点都称为Box。
render树构建完毕后，浏览器根据render树绘制页面。
## 协商缓存和强缓存
https://blog.csdn.net/wclimb/article/details/81316783